<main class="flex-grow flex items-center justify-center px-4 py-12">

        {% if normal_user %}
        <div class="w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-4">Change Password</h1>
            </div>


            <form class="space-y-6" action="" hx-post="{% url 'editPassword' %}" hx-target="#user-right-content" hx-swap="innerHTML">
                {% csrf_token %}
                <div>
                    <input type="text" name="current_password"placeholder="Current Password" 
                        autocomplete="off" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-600 text-gray-700">
                </div>

                <div>
                    <input type="text" name="new_password" placeholder="New Password" autocomplete="off"
                        class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-600 text-gray-700">
                </div>

                <button 
                    type="submit" 
                    class="w-full bg-orange-600 hover:bg-ortange-700 text-white font-semibold py-3 rounded-lg transition duration-200"
                >
                    Change Password
                </button>
            </form>
        </div>

        {% else %}

        <div class="w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-4">Set Password</h1>
            </div>

            <form class="space-y-6" action="" hx-post="{% url 'editPassword' %}" hx-target="#user-right-content" hx-swap="innerHTML">
                {% csrf_token %}
                <div>
                    <input type="text" name="nw_password" placeholder="New Password" 
                        autocomplete="off" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-600 text-gray-700">
                </div>

                <div>
                    <input type="text" name="c_password" placeholder="Confirm Password" autocomplete="off"
                        class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-600 text-gray-700">
                </div>

                <button 
                    type="submit" 
                    class="w-full bg-orange-600 hover:bg-ortange-700 text-white font-semibold py-3 rounded-lg transition duration-200"
                >
                    Save Password
                </button>
            </form>

        </div>

        {% endif %}

    </main>


<!-- for toastify message display in htmx -->
<script>
document.body.addEventListener("htmx:afterOnLoad", (event) => {
    const trigger = event.detail.xhr.getResponseHeader("HX-Trigger");
    if (!trigger) return;

    const data = JSON.parse(trigger);

    if (data.toast_message) {
        let bg = "#3b82f6";

        if (data.toast_type === "success") bg = "#22c55e"; 
        else if (data.toast_type === "error") bg = "#ef4444"; 
        else if (data.toast_type === "warning") bg = "#eab308";

        showSnackbar(data.toast_message, bg);
    }
});
</script>
{% extends 'navbar.html' %}

{% block content%}

<!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Dashboard Heading -->
        <h2 class="text-3xl font-bold text-gray-900 mb-8">Dashboard</h2>

        <!-- Filter Dropdown -->
        <form method="get" id="filter-form" class="flex items-center space-x-3 mb-7">
    
            <select
                name="filter"
                id="filter"
                onchange="document.getElementById('filter-form').submit();"
                class="border border-gray-300 rounded-lg px-4 py-2 text-gray-700 focus:ring focus:ring-indigo-200">

                <option value="today" {% if filter_type == 'today' %}selected{% endif %}>Today</option>
                <option value="weekly" {% if filter_type == 'weekly' %}selected{% endif %}>This Week</option>
                <option value="monthly" {% if filter_type == 'monthly' %}selected{% endif %}>This Month</option>
            </select>
        </form>

        <!-- sales on daily/weekly/monthly-->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Total Sales Card -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-sm font-medium text-gray-600 mb-2">Total Sales</h3>
                <p class="text-3xl font-bold text-gray-900">{{filtered_sales}}</p>
            </div>

            <!-- Total Orders Card -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-sm font-medium text-gray-600 mb-2">Total Orders</h3>
                <p class="text-3xl font-bold text-gray-900">{{filtered_count}}</p>
            </div>

            <!-- Total Customers Card -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-sm font-medium text-gray-600 mb-2">Total discount</h3>
                <p class="text-3xl font-bold text-gray-900">{{filtered_discount}}</p>
            </div>
        </div>

        <!-- Most Ordered Product -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
            <h3 class="text-lg font-bold text-gray-900 mb-2">Most Ordered Product ({{ filter_type|title }})</h3>
        {% if top_product %}
        <p class="text-gray-700">
            <span class="font-semibold">{{ top_product.products|join:", " }}</span>
                â€” ordered <span class="font-semibold">{{ top_product.quantity }}</span> times
        </p>
        {% else %}
        <p class="text-gray-500">No orders found for this period.</p>
        {% endif %}
        </div>

        <!-- Top Product Categories -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-900 mb-6">Top Product Categories</h3>
            
            <div class="flex flex-col md:flex-row items-center justify-center gap-8">
                <!-- Pie Chart (using conic gradient) -->
                <div class="flex-shrink-0">
                    <div class="w-48 h-48 rounded-full" style="background: conic-gradient(
                        from 0deg,
                        #EF4444 0% 20%,
                        #3B82F6 20% 40%,
                        #F59E0B 40% 65%,
                        #10B981 65% 85%,
                        #8B5CF6 85% 100%
                    );"></div>
                    <p class="text-center text-sm text-gray-600 mt-4">Sales by Category</p>
                </div>

                <!-- Legend -->
                <div class="space-y-3">
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 bg-red-500 rounded"></div>
                        <span class="text-gray-700">Nuts</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 bg-blue-500 rounded"></div>
                        <span class="text-gray-700">Dry Fruits</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 bg-amber-500 rounded"></div>
                        <span class="text-gray-700">Dates</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 bg-green-500 rounded"></div>
                        <span class="text-gray-700">Spices</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 bg-purple-500 rounded"></div>
                        <span class="text-gray-700">Seeds</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Orders -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-900 mb-6">Recent Orders</h3>
            
            <!-- Table Container with Horizontal Scroll -->
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="border-b border-gray-200">
                            <th class="text-left text-sm font-semibold text-gray-700 pb-3 pr-4">User</th>
                            <th class="text-left text-sm font-semibold text-gray-700 pb-3 pr-4">Item</th>
                            <th class="text-left text-sm font-semibold text-gray-700 pb-3 pr-4">Date</th>
                            <th class="text-left text-sm font-semibold text-gray-700 pb-3 pr-4">Status</th>
                            <th class="text-left text-sm font-semibold text-gray-700 pb-3">Amount</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-100">
                    
                        <tr>
                            <td class="py-4 pr-4 text-sm text-gray-900">Emily Johnson</td>
                            <td class="py-4 pr-4 text-sm text-gray-600">Floral Dress</td>
                            <td class="py-4 pr-4 text-sm text-gray-600">2024-01-15</td>
                            <td class="py-4 pr-4">
                                <span class="inline-flex px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">Shipped</span>
                            </td>
                            <td class="py-4 text-sm font-semibold text-gray-900">Rs. 890</td>
                        </tr>
                     
                        <tr>
                            <td class="py-4 pr-4 text-sm text-gray-900">Ethan Porter</td>
                            <td class="py-4 pr-4 text-sm text-gray-600">Laptop</td>
                            <td class="py-4 pr-4 text-sm text-gray-600">2024-01-14</td>
                            <td class="py-4 pr-4">
                                <span class="inline-flex px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Delivered</span>
                            </td>
                            <td class="py-4 text-sm font-semibold text-gray-900">Rs. 12990</td>
                        </tr>
                        
                        <tr>
                            <td class="py-4 pr-4 text-sm text-gray-900">Olivia Hayes</td>
                            <td class="py-4 pr-4 text-sm text-gray-600">Stainless Sink</td>
                            <td class="py-4 pr-4 text-sm text-gray-600">2024-01-14</td>
                            <td class="py-4 pr-4">
                                <span class="inline-flex px-3 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full">Processing</span>
                            </td>
                            <td class="py-4 text-sm font-semibold text-gray-900">Rs. 2450</td>
                        </tr>
                     
                        <tr>
                            <td class="py-4 pr-4 text-sm text-gray-900">Owen Mitchell</td>
                            <td class="py-4 pr-4 text-sm text-gray-600">Novel</td>
                            <td class="py-4 pr-4 text-sm text-gray-600">2024-01-13</td>
                            <td class="py-4 pr-4">
                                <span class="inline-flex px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">Shipped</span>
                            </td>
                            <td class="py-4 text-sm font-semibold text-gray-900">Rs. 1500</td>
                        </tr>
                      
                        <tr>
                            <td class="py-4 pr-4 text-sm text-gray-900">Isabelle Reed</td>
                            <td class="py-4 pr-4 text-sm text-gray-600">Toy Car</td>
                            <td class="py-4 pr-4 text-sm text-gray-600">2024-01-13</td>
                            <td class="py-4 pr-4">
                                <span class="inline-flex px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Delivered</span>
                            </td>
                            <td class="py-4 text-sm font-semibold text-gray-900">Rs. 3200</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>


{% endblock %}





